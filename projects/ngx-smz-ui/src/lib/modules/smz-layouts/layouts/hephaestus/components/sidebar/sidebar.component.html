<ng-container *ngIf="layout$ | async as layout">
<ng-container *ngIf="appName$ | async as appName">
<ng-container *ngIf="(currentRoute$ | async) as route">

    <div class="layout-sidebar" (mouseleave)="collapseAll(menu)">

        <ng-container *ngIf="(appLayoutLogo$ | async) as appLayoutLogo">

            <!-- LOGO EM FORMATO DE ICONE -->
            <ng-container *ngIf="layout.menu === menuType.SLIM; else elseHeaderTemplate">
                <a class="logo" [routerLink]="rbkConfig.authentication.authenticatedRoot">
                    <img id="app-logo" [src]="appLayoutLogo.icon" class="m-2 slim-mobile-logo">
                    <span class="app-name">{{ appName }}</span>
                </a>
            </ng-container>

            <!-- LOGO COMPLETA -->
            <ng-template #elseHeaderTemplate>
                <a class="logo" [routerLink]="rbkConfig.authentication.authenticatedRoot">
                    <img id="app-logo" [src]="appLayoutLogo.horizontal" class="pl-4 pr-4" width="100%">
                </a>
            </ng-template>

        </ng-container>

        <!-- INICIO DO MENU -->
        <div class="layout-menu-container">
            <ul class="layout-menu">

                <!-- NÍVEL 1 -->
                <ng-container *ngFor="let item of menu | isVisible; let last = last; let itemIndex = index;">
                    <li class="layout-root-menuitem" [ngClass]="{ 'active-menuitem' : item.expanded }">

                        <!-- CABEÇALHO DO NÍVEL 1 -->
                        <div class="layout-menuitem-root-text">{{ item.label }}</div>

                        <!-- ITENS PARA O MENU COLAPSADO -->
                        <a *ngIf="item.command == null && item.routerLink == null" class="p-ripple" [tabindex]="itemIndex" (click)="toogleOnly(item, menu)" (mouseover)="toogleOnly(item, menu)">
                            <i class="layout-menuitem-icon pi" [ngClass]="item.icon"></i>
                            <span class="layout-menuitem-text">{{ item.label }}</span>
                            <i class="pi pi-fw pi-chevron-down layout-submenu-toggler"></i>
                            <span class="p-ink"></span>
                        </a>

                        <a *ngIf="item.command != null || item.routerLink != null" class="p-ripple" [tabindex]="itemIndex" menuItemAction [item]="item" [parent]="null" [breadcrumbs]="true" [ngClass]="{ 'active-first-route': route.url | urlChecker : item.routerLink }">
                            <i class="layout-menuitem-icon pi" [ngClass]="item.icon"></i>
                            <span class="layout-menuitem-text">{{ item.label }}</span>
                            <i class="pi pi-fw pi-chevron-down layout-submenu-toggler"></i>
                            <span class="p-ink"></span>
                        </a>

                        <ng-container *ngIf="item.expanded">
                            <ul smz-ui-hephaestus-menu-slim-node [item]="item" [parent]="null" [currentUrl]="route.url" role="menu" style="z-index: 100;"></ul>
                        </ng-container>

                        <smz-ui-hephaestus-menu-node [item]="item" [currentUrl]="route.url"></smz-ui-hephaestus-menu-node>

                    </li>

                    <li *ngIf="!last" class="menu-separator"></li>
                </ng-container>

            </ul>
        </div>
    </div>

</ng-container>
</ng-container>
</ng-container>