@if (!popup || visible) {
  <div
    #container
    [ngClass]="{'p-menu p-component': true, 'p-menu-overlay': popup}"
    [class]="styleClass"
    [ngStyle]="style"
    (click)="onOverlayClick($event)"
    [@overlayAnimation]="{value: 'visible', params: {showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}"
    [@.disabled]="popup !== true"
    (@overlayAnimation.start)="onOverlayAnimationStart($event)"
    (@overlayAnimation.done)="onOverlayAnimationEnd($event)"
    >
    <ul class="p-menu-list p-reset" role="menu">
      @if (hasSubMenu(); as submenu) {
        @for (submenu of model; track submenu) {
          @if (submenu.separator) {
            <li
              class="p-menu-separator"
              [ngClass]="{'hidden': submenu.visible === false}"
              role="separator"
            ></li>
          }
          @if (!submenu.separator) {
            <li
              class="p-submenu-header"
              [attr.data-automationid]="submenu.automationId"
              [ngClass]="{'hidden': submenu.visible === false}"
              pTooltip
              [tooltipOptions]="submenu.tooltipOptions"
              role="none"
              >
              @if (submenu.escape !== false) {
                <span
                  >{{submenu.label}}</span
                  >
                } @else {
                  <span [innerHTML]="submenu.label"></span
                    >
                  }
                </li>
              }
              @for (item of submenu.items; track item) {
                @if (item.separator) {
                  <li
                    class="p-menu-separator"
                    [ngClass]="{'hidden': (item.visible === false || submenu.visible === false)}"
                    role="separator"
                  ></li>
                }
                @if (!item.separator) {
                  <li
                    class="p-menuitem"
                    [smzMenuItemContent]="item"
                    [ngClass]="{'hidden': (item.visible === false || submenu.visible === false)}"
                    [ngStyle]="item.style"
                    [class]="item.styleClass"
                    pTooltip
                    [tooltipOptions]="item.tooltipOptions"
                    role="none"
                  ></li>
                }
              }
            }
          }
          @if (!hasSubMenu(); as item) {
            @for (item of model; track item) {
              @if (item.separator) {
                <li
                  class="p-menu-separator"
                  [ngClass]="{'hidden': item.visible === false}"
                  role="separator"
                ></li>
              }
              @if (!item.separator) {
                <li
                  class="p-menuitem"
                  [smzMenuItemContent]="item"
                  [ngClass]="{'hidden': item.visible === false}"
                  [ngStyle]="item.style"
                  [class]="item.styleClass"
                  pTooltip
                  [tooltipOptions]="item.tooltipOptions"
                  role="none"
                ></li>
              }
            }
          }
        </ul>
      </div>
    }
