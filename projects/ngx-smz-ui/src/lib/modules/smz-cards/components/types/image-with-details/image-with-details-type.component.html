
@switch (mode) {
  @case (modes.GRID) {
    <div class="h-full grid grid-nogutter flex-col items-start justify-start gap-2 relative" [ngClass]="template.cardStyleClass + (isDebug ? ' border border-red-500 border-solid' : '')">
      <!-- IMAGE -->
      @if (template.image | transformContent : data; as image) {
        <img
          serverImage
          [path]="image.transform.override ? image.transform.override.dataPath : (data | cardsContent : image.dataPath).result"
          [maximize]="image.maximize"
          [openMaximized]="image.openMaximized"
          [placeholder]="'assets/images/placeholder.jpeg'"
          [title]="image.title.isVisible ? image.title.getText(data) : null"
          [useServerPath]="image.useServerPath"
          [ngClass]="image.gridStyleClass"
          >
        }
        <div class="grid grid-nogutter flex-col items-start justify-start gap-2 col" [ngClass]="template.contentStyleClass">
          <!-- TITLE -->
          @if (template.title && !template.title.hideInGrid) {
            <div contentSelector [content]="template.title" [data]="data" [ngClass]="template.title.conditionalStyleClass != null ? template.title.conditionalStyleClass(data) : (template.title.styleClass ?? 'font-bold')"></div>
          }
          <!-- SUBTITLE -->
          @if (template.subTitle && !template.subTitle.hideInGrid) {
            <div contentSelector [content]="template.subTitle" [data]="data" [ngClass]="template.title.conditionalStyleClass != null ? template.title.conditionalStyleClass(data) : (template.subTitle.styleClass ?? 'text-sm')"></div>
          }
          <!-- TAGS -->
          <div class="col-12 grid grid-nogutter items-center justify-start gap-2">
            @for (tag of template.tags let i = index; track tag) {
              @if (!tag.hideInGrid) {
                <div contentSelector [content]="tag" [data]="data" [ngClass]="tag.conditionalStyleClass != null ? tag.conditionalStyleClass(data) : (tag.styleClass ?? 'px-2 py-1 text-sm bg-gray-200 text-surface-50 rounded')"></div>
              }
            }
          </div>
          <!-- COMPONENTS -->
          @for (component of template.components let i = index; track component) {
            <ng-template [smzInjectDataPathComponent]="component.componentData" [data]="data" [state]="template._context"></ng-template>
          }
          <!-- OTHERS -->
          @for (other of template.others let i = index; track other) {
            @if (!other.hideInGrid) {
              <div contentSelector [content]="other" [data]="data" [ngClass]="other.conditionalStyleClass != null ? other.conditionalStyleClass(data) : (other.styleClass ?? 'text-sm')"></div>
            }
          }
          <div class="col"></div>
          <!-- BUTTONS -->
          @if (buttons.callback != null && buttons.callback(data); as buttons) {
            <div class="grid grid-nogutter items-center justify-start gap-1">
              @for (button of buttons; track button; let i = $index) {
                @if (button.visible) {
                  <button pButton type="button" buttonAction [item]="button" [data]="data" [label]="button.label" [icon]="button.icon" [disabled]="button.disabled" [pTooltip]="button.tooltip" class="p-button-outlined p-button-sm px-3 py-2" [ngClass]="button.styleClass"></button>
                }
              }
            </div>
          }
        </div>
        <!-- MENU -->
        @if (menu.callback != null && menu.callback(data); as menuItem) {
          <div class="grid grid-nogutter items-center justify-end gap-1 col-12 absolute top-2 right-2">
            <smz-menu [items]="menuItem" [data]="data" [icon]="menu.icon" [styleClass]="menu.styleClass" [buttonClass]="menu.buttonClass"></smz-menu>
          </div>
        }
      </div>
    }
    @case (modes.LIST) {
      <div class="grid grid-nogutter items-start justify-start gap-4 relative col" [ngClass]="template.cardStyleClass + (isDebug ? ' border border-red-500 border-solid' : '')">
        <!-- IMAGE -->
        @if (template.image | transformContent : data; as image) {
          <img
            serverImage
            [path]="image.transform.override ? image.transform.override.dataPath : (data | cardsContent : image.dataPath).result"
            [maximize]="image.maximize"
            [openMaximized]="image.openMaximized"
            [placeholder]="'assets/images/placeholder.jpeg'"
            [title]="image.title.isVisible ? image.title.getText(data) : null"
            [useServerPath]="image.useServerPath"
            [ngClass]="image.listStyleClass"
            >
          }
          <div class="h-full grid grid-nogutter flex-col items-start justify-start gap-2 relative col" [ngClass]="template.contentStyleClass">
            <!-- TITLE -->
            @if (template.title && !template.title.hideInList) {
              <div contentSelector [content]="template.title" [data]="data" [ngClass]="template.title.styleClass ?? 'font-bold'"></div>
            }
            <!-- SUBTITLE -->
            @if (template.subTitle && !template.subTitle.hideInList) {
              <div contentSelector [content]="template.subTitle" [data]="data" [ngClass]="template.subTitle.styleClass ?? 'text-sm'"></div>
            }
            <!-- TAGS -->
            <div class="col-12 grid grid-nogutter items-center justify-start gap-2">
              @for (tag of template.tags let i = index; track tag) {
                @if (!tag.hideInList) {
                  <div contentSelector [content]="tag" [data]="data" [ngClass]="tag.styleClass ?? 'px-2 py-1 text-sm bg-gray-200 text-surface-50 rounded'"></div>
                }
              }
            </div>
            <!-- COMPONENTS -->
            @for (component of template.components let i = index; track component) {
              <ng-template [smzInjectDataPathComponent]="component.componentData" [data]="data" [state]="template._context"></ng-template>
            }
            <!-- OTHERS -->
            @for (other of template.others let i = index; track other) {
              @if (!other.hideInList) {
                <div contentSelector [content]="other" [data]="data" [ngClass]="other.styleClass ?? 'text-sm'"></div>
              }
            }
            <div class="col"></div>
            <!-- BUTTONS -->
            @if (buttons.callback != null && buttons.callback(data); as buttons) {
              <div class="grid grid-nogutter items-center justify-start gap-1">
                @for (button of buttons; track button; let i = $index) {
                  @if (button.visible) {
                    <button pButton type="button" buttonAction [item]="button" [data]="data" [label]="button.label" [icon]="button.icon" [disabled]="button.disabled" [pTooltip]="button.tooltip" class="p-button-outlined p-button-sm px-3 py-2" [ngClass]="button.styleClass"></button>
                  }
                }
              </div>
            }
          </div>
          <!-- MENU -->
          @if (menu.callback != null && menu.callback(data); as menuItem) {
            <div class="grid grid-nogutter items-center justify-end gap-1 col-12 absolute top-2 right-2">
              <smz-menu [items]="menuItem" [data]="data" [icon]="menu.icon" [styleClass]="menu.styleClass" [buttonClass]="menu.buttonClass"></smz-menu>
            </div>
          }
        </div>
      }
    }
