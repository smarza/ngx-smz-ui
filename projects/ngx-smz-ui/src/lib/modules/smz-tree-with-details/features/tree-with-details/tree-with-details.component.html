<div *ngIf="state != null" class="grid grid-nogutter items-start justify-start h-full">

  <ng-container *ngClone="state.items$ | async as items">

  <!-- TREE -->
  <div class="h-full col-12 lg:col-6 p-0 pr-2">
    <div smzUiBlock #treeContainer [component]="treeContainer" class="h-full w-full rounded p-2 bg-surface-a text-text-color border border-solid border-surface-d">

      <div class="h-full">
          <smz-ui-tree [items]="items" [state]="state.treeState" (selectionChange)="selectionChanged($event)" styleClass="border-none"></smz-ui-tree>
      </div>
    </div>
  </div>

  <!-- DETAILS -->
  <div class="h-full col-12 lg:col-6 p-0 pl-2">
    <div class="h-full items-stretch flex-col grid justify-start grid-nogutter p-2 rounded w-full overflow-y-auto bg-surface-a text-text-color border border-solid border-surface-d">

    <!-- CONTEÃšDO -->
    <ng-container *ngIf="state.selectedNode != null; else noSelectionTemplate">

      <ng-container *ngIf="detailsTemplate != null">
        <ng-container *ngTemplateOutlet="detailsTemplate; context: { $implicit: state.selectedNode, type: state.selectedNode.type }"></ng-container>
      </ng-container>

    </ng-container>

    <ng-template #noSelectionTemplate>

      <ng-container *ngIf="items != null">
        <ng-container *ngIf="emptySelectionTemplate != null; else defaultEmptySelectionTemplate">
          <ng-container *ngTemplateOutlet="emptySelectionTemplate; context: { $implicit: state.selectedNode, type: state.selectedNode.type }"></ng-container>
        </ng-container>

        <ng-template #defaultEmptySelectionTemplate>
          <div class="grid grid-nogutter items-center justify-center p-4 flex-col flex-grow mt-10">
            <i class="fas fa-info-circle text-5xl text-yellow-500 mb-4"></i>
            <div class="text-lg">Nenhum item selecionado.</div>
          </div>
        </ng-template>
      </ng-container>

    </ng-template>

    </div>
  </div>

</ng-container>

</div>